<!-- 
<div class="mt-10 max-w-sm mx-auto bg-white shadow-lg rounded-lg overflow-hidden">
  <div class="sm:flex sm:items-center px-6 py-4">
    <img class="block mx-auto sm:mx-0 sm:flex-shrink-0 h-16 sm:h-24 rounded-full" src="https://randomuser.me/api/portraits/women/17.jpg" alt="Woman's Face">
    <div class="mt-4 sm:mt-0 sm:ml-4 text-center sm:text-left">
      <p class="text-xl leading-tight">Erin Lindford</p>
      <p class="text-sm leading-tight text-gray-600">Customer Support Specialist</p>
      <div class="mt-4">
        <button class="text-purple-500 hover:text-white hover:bg-purple-500 border border-purple-500 text-xs font-semibold rounded-full px-4 py-1 leading-normal">Message</button>
      </div>
    </div>
  </div>
</div>
-->
<div id="testmap" class="h-56 w-1/2">
</div>

<%= form_with(local: true) do |f| %>
  <%= f.label :content, "text_field_test", class: "label" %>
  <%= f.text_area :content, id: 'content', class: "border" %>
<% end %>

<% if logged_in? %>
<li><%= link_to "ユーザー一覧", users_path %></li>
<section class="stats">
  <%= render 'shared/stats' %>
</section>
<%= link_to "最新の記事", microposts_url, {class: "text-2xl rounded-md text-indigo-500 hover:text-indigo-800 hover:bg-indigo-200"} %>
<div id='ll'><%= current_user.microposts.first.latlng %></div>


<script>
// railsに保存してあるstring型のlatlngをNumber型の配列に変換
function exchangeLatlng(id) {
  const ll = "<%= current_user.microposts.first.latlng %>".replace(/\(/g, '').replace(/\)/g, '');
  const latlng = [Number(ll.split(',')[0]), Number(ll.split(',')[1])];
  return latlng;
}

function testMap(){
  const exchangedlatlng = exchangeLatlng('ll');
  const target = document.getElementById('testmap');
  let latlng = new google.maps.LatLng(exchangedlatlng[0], exchangedlatlng[1]);
  let test_map = new google.maps.Map(target, {
    center: latlng,
    zoom: 8,
    zoomControl: false,
    mapTypeControl: false,
    streetViewControl: false,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    restriction: {
      latLngBounds: {
        north: 48.0,
        south: 20.0,
        west: 125.0,
        east: 150.0
      },
      strictBounds: false
    },
  });
}
</script>

<script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyCIX7ci0yBU4r9axzQEvNd5nefZiifw1bM&libraries=places&callback=testMap" async defer></script>



<% end %>