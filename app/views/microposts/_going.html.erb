<!-- 非ログインユーザービュー -->
<% if !logged_in? %>

  <%= form_with(model: Going, class: "inline") do |f| %>
    <span><%= hidden_field_tag :micropost_id, micropost.id, {id: "hidden_micropost#{micropost.id}"} %></span>
    <%= f.submit "行ってみたい!", class: "btn-blue px-2" %>
    <span class="text-purple-500"><%= micropost.goings.count %></span>
  <% end %>

<!-- ログインユーザービュー -->
<% elsif current_user.already_gone?(micropost) %>

  <%= form_with(model: current_user.goings.find_by(micropost_id: micropost.id), html: { method: :delete, class: "inline" }) do |f| %>
    <span><%= hidden_field_tag :micropost_id, micropost.id, {id: "hidden_micropost#{micropost.id}"} %></span>
    <%= f.submit "チェックを外す", class: "px-2 border border-gray-300 rounded-full bg-gray-300 hover:bg-gray-400" %>
    <span class=""><%= micropost.goings.count %></span>
  <% end %>

<% else %>

  <%= form_with(model: current_user.goings.build, class: "inline") do |f| %>
    <span><%= hidden_field_tag :micropost_id, micropost.id, {id: "hidden_micropost#{micropost.id}"} %></span>
    <%= f.submit "行ってみたい!", class: "btn-blue px-2" %>
    <span class="text-purple-500"><%= micropost.goings.count %></span>
  <% end %>

<% end %>
